# Implementation Plan

**Plan:** Реализовать страницу `/projects/new`, повторяющую паттерны создания задачи, подключить её к существующим кнопкам добавления проекта и расширить состояние проектов возможностью добавления новой записи с валидацией данных.

## Data sources / schemas

- Расширить `useProjectsState` (в `composables/useProjectOrders.ts`) или создать отдельный композабл `useProjects` с методом `createProject`, который добавляет объект `Project` в состояние `projects-data`, пересчитывая `completed`/`total` по умолчанию (0 завершено, 0 всего) и создавая уникальный `id`.
- Определить интерфейс входных данных для проекта (название, описание, ссылка, дата запуска). При необходимости вынести в тип `CreateProjectInput`, чтобы переиспользовать в форме и тестах.
- Сохранить новые проекты в локальном состоянии, чтобы они были доступны на главной странице и в последующих сессиях во время работы приложения (reactive state).

## Contracts and interfaces

- Создать маршрут `/projects/new` (файл `pages/projects/new.vue`) с `useRoute`/`useRouter` и query-параметром `from` для возврата.
- Определить публичный метод `createProject` в новом/существующем композабле; метод возвращает созданный `Project` и выбрасывает ошибку при некорректных данных. Обновить потребителей, если потребуется.
- Настроить обработчики у кнопок «Создать проект» и плавающей кнопки на `/` для перехода через `router.push({ path: '/projects/new', query: { from: route.fullPath } })`.
- В форме предусмотреть интерфейс валидации: `title` обязательно, `link` — допустимые схемы `http/https`; ошибки отображаются рядом с полями и в нижнем статусе.

## Architecture / Components

- UI: переиспользовать визуальные паттерны из `pages/projects/[id]/orders/new.vue` — тёмный фон, фиксированный футер, sticky header с кнопкой закрытия. Выделить компоненты при необходимости (например, поле ввода), но можно ограничиться копированием стилевых классов с адаптацией текстов.
- Логика: внутри страницы использовать реактивные refs для полей формы, computed для валидаций, `isSubmitting` для блокировки кнопки. После успешного создания вызвать переход на `from` или `/`.
- Навигация: при закрытии формы и после успешного сабмита возвращаться на маршрут `from`; если query отсутствует, использовать `/`.
- Тестирование: дополнить существующие unit-тесты или добавить новые (например, в `tests/useProjectOrders.test.ts`) для метода `createProject` и маршрутизации.

## Risks

- Отсутствие серверной синхронизации может приводить к расхождению данных после перезагрузки — важно задокументировать ограничение.
- Возможные дубли `id` для проектов при генерации; нужно гарантировать уникальность (например, `project-${timestamp}`) и проверить отсутствие конфликтов в ссылках.
- Несогласованность стилей при копировании из страницы задач — требуется ручная проверка на мобильных разрешениях.
- Потенциальные несоответствия расчёта `completed/total` для новых проектов; нужно определить стартовые значения (0 и 0) и не ломать прогресс-бар.

## Assumptions

- Создание проекта не требует выбора задач или исполнителей на этапе создания; список задач и прогресс инициализируются пустыми значениями.
- Дополнительные поля (аватар, цвет, участники) не нужны в рамках текущей итерации.
- Переход из других страниц (например, будущей панели проектов) также будет использовать тот же маршрут, поэтому логика `from` универсальна.
