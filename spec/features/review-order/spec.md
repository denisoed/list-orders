# Review Order Submission Flow

**Specification:** На странице деталей заказа пользователь, нажимающий кнопку «Отметить выполненным», должен переходить на отдельный экран отправки на проверку, где можно прикрепить подтверждающие фото и оставить комментарий перед отправкой задачи на проверку.

## User Stories
- Как исполнитель заказа, я хочу после нажатия «Отметить выполненным» перейти на страницу отправки на проверку, чтобы убедиться, что заполняю все обязательные данные перед финальной отправкой.
- Как исполнитель заказа, я хочу прикрепить одно или несколько изображений подтверждения, чтобы куратор видел фактический результат выполненной работы.
- Как исполнитель заказа, я хочу добавить поясняющий комментарий к отправке, чтобы заранее объяснить детали и снизить количество возвратов на доработку.

## Main scenarios and rules
- При нажатии на кнопку «Отметить выполненным» на странице деталей заказа выполняется редирект на новую страницу/роут «Отправка на проверку».
- Новая страница отображает основные данные заказа (идентификатор, название) и содержит форму с обязательными полями: загрузка хотя бы одного фото и текстовый комментарий.
- Поле загрузки поддерживает добавление нескольких изображений (jpeg/png/webp); каждое изображение предварительно отображается в виде превью с возможностью удалить перед отправкой.
- Комментарий является обязательным полем; предусмотрена минимальная длина (например, 10 символов) и валидация на запрещённые типы контента (базовая XSS-защита, ограничение длины).
- Кнопка отправки активируется только после прохождения всех проверок (минимум одно изображение, валидный комментарий).
- После успешной отправки запрос уходит на сервер для смены статуса заказа (например, `submitted_for_review`) и прикрепления медиа/комментария; пользователь получает подтверждение и возвращается на страницу деталей или список заказов.
- В случае ошибок загрузки или валидации пользователь видит понятное сообщение и остаётся на текущем экране для исправления.

## Non-functional requirements
- Поддержка работы на мобильных и десктопных разрешениях; интерфейс формы должен быть отзывчивым.
- Ограничение на размер загружаемых изображений (например, до 10 МБ каждое) и общее время ответа сервера не более 3 секунд при стабильном соединении.
- Передача файлов должна происходить по защищённому каналу (HTTPS), с соблюдением политик приватности и ограничением доступа к медиа только для участников заказа.
- Текст комментариев и метаданные файлов должны фильтроваться и храниться в соответствии с политикой безопасности (защита от XSS/инъекций).

## Assumptions
- Идентификатор заказа и текущий статус доступны на странице деталей и могут быть переданы в новый маршрут без дополнительных запросов.
- Существуют серверные эндпоинты для загрузки изображений и обновления статуса заказа или их можно расширить без изменения архитектуры.
- Оповещение куратора о новой отправке на проверку уже реализовано или будет настроено отдельно (вне текущей задачи).
- Требуется уточнение по максимальному количеству фотографий и допустимым форматам файлов, если есть дополнительные ограничения.
